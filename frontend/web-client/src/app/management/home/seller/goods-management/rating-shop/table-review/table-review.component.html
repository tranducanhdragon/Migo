<p-selectButton [options]="options" [(ngModel)]="selectedOption"></p-selectButton>
<div style="margin-top: 20px">
    <p-table #dt [value]="dataSource" responsiveLayout="scroll" [rows]="10" selectionMode="multiple"
        dataKey="id" editMode="row"
        [paginator]="false" [showCurrentPageReport]="true"
        currentPageReportTemplate="{first}-{last}/{totalRecords} bản ghi"
        [rowsPerPageOptions]="[10,25,50]" dataKey="id">
        <ng-template pTemplate="header">
            <tr>
                <th>Thông tin sản phẩm</th>
                <th>Đánh giá từ người mua</th>
                <th>Trả lời đánh giá của bạn</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-review  let-editing="editing" let-ri="rowIndex">
            <tr [pEditableRow]="review">
                <td style="max-width: 200px">
                    <div style="display: flex;" *ngIf="review.isItemReview">
                        <p-image [src]="review.item.properties?.infoBasic[0]?.data[0]?.url" width="100px"></p-image>
                        <div style="margin-left: 15px">
                            <p style="font-weight: 600;">{{review.item.properties?.infoBasic[2]?.value}}</p>
                            <p>Giá: {{review.item.properties?.infoSell[1]?.property?.value | currency:'VND'}}</p>
                        </div>
                    </div>
                    <div style="display: flex;" *ngIf="!review.isItemReview">
                        <p-image [src]="shopData?.properties?.shopInfo?.imageUrl?shopData?.properties?.shopInfo?.imageUrl : 'https://cdn4.vectorstock.com/i/1000x1000/08/28/shop-store-flat-icon-vector-14270828.jpg'" width="100px"></p-image>
                        <p style="margin-left: 15px; font-weight: 600;">Đánh giá Shop</p>
                    </div>
                </td>
                <td style="max-width: 500px">
                    <div style="display: flex;">
                        <p-image src="http://ativn.edu.vn/wp-content/uploads/2018/03/user.png" width="50px"></p-image>
                        <div style="margin-left: 15px">
                            <p-rating [ngModel]="review.ratePoint" [ngModelOptions]="{standalone: true}"
                             [readonly]="true" [stars]="5" [cancel]="false"></p-rating>
                            <p style="margin-top: 0px">Đánh giá: {{review.comment}}</p>
                            <p style="font-size: 12px; color: #c2c2c2;">{{review.creationTime | date}}</p>
                        </div>
                    </div>
                </td>
                <td style="max-width: 300px;">
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <textarea [(ngModel)]="review.answerd.comment"  pInputTextarea autoResize="autoResize" style="min-width: 300px;"></textarea>
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{review.answerd?.comment}}
                    </ng-template>
                   </p-cellEditor>
                </td>
                <td style="text-align:center">
                  <button *ngIf="!editing" pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil" (click)="onRowEditInit(review)" class="p-button-rounded p-button-text "></button>
                  <button *ngIf="editing" pButton pRipple type="button" pSaveEditableRow icon="pi pi-check" (click)="onRowEditSave(review)" class="p-button-rounded p-button-text p-button-success p-mr-2"></button>
                  <button *ngIf="editing" pButton pRipple type="button" pCancelEditableRow icon="pi pi-times" (click)="onRowEditCancel(review)" class="p-button-rounded p-button-text p-button-danger"></button>
              </td>
            </tr>
        </ng-template>
    </p-table>
</div>

<p-toast position="bottom-right"></p-toast>